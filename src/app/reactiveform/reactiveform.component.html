<app-heading [pageName]="pagename"></app-heading>
<div class="container mt-5">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">     
        <div class="form-group">
            <label>First name</label>
            <input type="text" 
            placeholder="Name" 
            class="form-control" 
            name="fname" 
            formControlName = 'fname'
            [ngClass]="{'is-invalid' : fname.touched && fname.invalid}" 
            >
            <div class="alert alert-danger" *ngIf="fname.touched && fname.invalid">
                <div *ngIf="fname.errors?.['required']"> First name is required. </div>
                <div *ngIf="fname.errors?.['minlength']"> The first name must be min 5 charecters. </div>
                <div *ngIf="fname.errors?.noSpaceValidator"> The first name can not contain spaces. </div>
            </div>
        </div><br>

        <div class="form-group">
            <label>Email</label>
            <input type="text" 
            placeholder="Name" 
            class="form-control" 
            name="email" 
            formControlName = 'email'
            [ngClass]="{'is-invalid' : email.touched && email.invalid}" 
            >
            <div class="alert alert-danger" *ngIf="email.touched && email.invalid">
                <div *ngIf="email.errors?.['required']">Email is required.</div>
                <div *ngIf="email.errors?.['email']">Invalid email address.</div>
            </div>
        </div><br>

        <!-- contact details nested form group  -->
    <div formGroupName="contactDetails">
        <div class="form-group">
            <label>Address</label>
            <textarea 
            cols="20" 
            rows="3" 
            placeholder="Address" 
            class="form-control" 
            name="address" 
            formControlName = 'address'
            [ngClass]="{'is-invalid' : address.touched && address.invalid}" 
            >
            </textarea>
            <div class="alert alert-danger" *ngIf="address.touched && address.invalid">
                <div *ngIf="address.errors?.['required']">Address is required.</div>
            </div>
        </div><br>

        <div class="form-group">
            <label>Shipping Address</label>
            <textarea 
            cols="20" 
            rows="3" 
            placeholder="Shipping Address" 
            class="form-control" 
            name="shippingAddress" 
            formControlName = 'shippingAddress'
            [ngClass]="{'is-invalid' : shippingAddress.touched && shippingAddress.invalid}" 
            >
            </textarea>
            <div class="alert alert-danger" *ngIf="shippingAddress.touched && shippingAddress.invalid">
                <div *ngIf="shippingAddress.errors?.['required']">Shipping address is required.</div>
            </div>
        </div><br>

        <div class="form-group">
            <label>Contact Number</label>
            <input type="text" 
            placeholder="Contact Number" 
            class="form-control" 
            name="contactNumber" 
            formControlName = 'contactNumber'
            [ngClass]="{'is-invalid' : contactNumber.touched && contactNumber.invalid}" 
            >
            <div class="alert alert-danger" *ngIf="contactNumber.touched && contactNumber.invalid">
                <div *ngIf="contactNumber.errors?.['required']">Contact number is required.</div>
                <div *ngIf="contactNumber.errors?.['pattern']">please enter correct contact number.</div>
            </div>
        </div><br>

        <div class="form-group">
            <label>skills</label>
            <input type="text" class="form-control" #skill (keyup.enter)="addSkills(skill)">
        </div><br>

        <ul class="list-group">
            <li class="list-group-item" *ngFor="let skill of skills.controls; let i = index">
                {{skill.value}}
                <a class="btn btn-danger" (click)="remoreSkills(i)"> x </a>
            </li>
        </ul>
    </div>

        <button type="submit" class="btn btn-primary" [disabled]="form.invalid"> Submit </button>
    </form>
</div>